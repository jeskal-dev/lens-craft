---
import { Icon } from "astro-icon/components";

interface Props {
  name: string;
  role: string;
  content: string;
  avatar: string;
  rating: number;
  index: number;
}

const { name, role, content, avatar, rating, index } = Astro.props;
---

<article
  class="group relative p-8 rounded-3xl bg-card/40 backdrop-blur-xl border border-white/5 hover:border-primary/20 transition-all duration-500 hover:-translate-y-2 flex flex-col motion-translate-y-in-50 motion-opacity-in-0"
  style={`--motion-delay: ${index * 200 + 400}ms`}
>
  <!-- Star Rating -->
  <div class="flex gap-1 mb-6">
    {
      [...Array(rating)].map((_) => (
        <Icon name="lucide:star" class="w-4 h-4 text-primary fill-primary" />
      ))
    }
  </div>

  <!-- Testimonial Content -->
  <p class="text-lg text-muted-foreground italic leading-relaxed mb-8 grow">
    "{content}"
  </p>

  <div class="flex items-center gap-4 pt-6 border-t border-white/5">
    <div
      class="w-12 h-12 rounded-full overflow-hidden border-2 border-primary/20 p-0.5 transition-transform duration-500 group-hover:scale-110"
    >
      <img
        src={avatar}
        alt={name}
        class="w-full h-full object-cover rounded-full"
      />
    </div>
    <div>
      <p class="font-bold text-foreground">{name}</p>
      <p
        class="text-xs text-muted-foreground uppercase tracking-wider font-medium"
      >
        {role}
      </p>
    </div>
  </div>

  <div
    class="absolute inset-0 bg-primary/2 opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-3xl -z-10"
  >
  </div>
</article>
