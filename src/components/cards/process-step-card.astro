---
import { Icon } from "astro-icon/components";

interface Props {
  step: string;
  icon: string;
  title: string;
  description: string;
  index: number;
  isEven: boolean;
  delay: number;
}

const { step, icon, title, description, index, isEven, delay } = Astro.props;
---

<div
  class="relative md:grid md:grid-cols-2 md:gap-12 lg:gap-16 items-center group motion-translate-y-in-30 motion-opacity-in-0 motion-duration-700"
  style={`animation-delay: ${delay}ms`}
>
  {/* Punto de conexión con animación */}
  <div
    class="absolute left-4 md:left-1/2 -translate-x-1/2 w-3 h-3 rounded-full bg-background border-2 border-primary z-10 shadow-[0_0_0_6px_rgba(var(--background-rgb),1)] group-hover:scale-150 group-hover:shadow-[0_0_0_8px_rgba(var(--background-rgb),1),0_0_20px_rgba(var(--primary-rgb),0.5)] transition-all duration-500"
  >
    <div
      class="absolute -inset-3 rounded-full bg-primary/20 animate-ping opacity-0 group-hover:opacity-100"
    >
    </div>
  </div>

  {/* Contenido - Estructura simplificada */}
  <div
    class:list={[
      "relative pl-12 md:pl-0 md:pr-8",
      isEven
        ? "md:col-start-1 md:text-right md:pr-8"
        : "md:col-start-2 md:text-left md:pl-8",
      index === 0 ? "mt-0" : "mt-12 md:mt-0",
    ]}
  >
    <div
      class="relative bg-linear-to-br from-white/5 to-transparent dark:from-white/2 rounded-2xl p-6 md:p-8 border border-border/50 backdrop-blur-sm group-hover:border-primary/30 transition-all duration-500 group-hover:shadow-xl group-hover:shadow-primary/5"
    >
      {/* Número de etapa con efecto sutil */}
      <div
        class:list={[
          "absolute top-3 text-7xl font-serif font-black text-foreground/5 dark:text-foreground/10 select-none transition-all duration-500 group-hover:text-primary/10",
          isEven ? "left-6" : "right-6",
        ]}
      >
        {step}
      </div>

      {/* Encabezado de la tarjeta */}
      <div
        class:list={[
          "flex items-start gap-4 mb-4",
          isEven && "md:flex-row-reverse",
        ]}
      >
        <div
          class="shrink-0 w-14 h-14 rounded-xl bg-linear-to-br from-primary/20 to-primary/5 flex items-center justify-center text-primary group-hover:from-primary/30 group-hover:to-primary/10 transition-all duration-500"
        >
          <Icon name={icon} class="w-7 h-7" />
        </div>
        <div>
          <h3 class="text-xl font-serif font-bold text-foreground mb-2">
            {title}
          </h3>
          <div
            class="h-0.5 w-full bg-linear-to-r from-primary/40 to-primary/20 rounded-full"
          >
          </div>
        </div>
      </div>

      {/* Descripción */}
      <p class="text-muted-foreground leading-relaxed relative z-10">
        {description}
      </p>

      {/* Línea decorativa inferior */}
      <div
        class:list={[
          "h-0.5 w-0 group-hover:w-full bg-linear-to-r transition-all duration-1000 delay-200 mt-6",
          isEven
            ? "from-transparent via-primary/20 to-primary/40"
            : "from-primary/40 via-primary/20 to-transparent",
        ]}
      >
      </div>
    </div>
  </div>
</div>
